# ComfyUIçš„AnimateDiffæ’ä»¶

ä¸ºComfyUIæä¾›äº†æ”¹è¿›çš„[AnimateDiff](https://github.com/guoyww/AnimateDiff/)é›†æˆï¼Œä»¥åŠè¢«ç§°ä¸ºEvolved Samplingçš„å…ˆè¿›é‡‡æ ·é€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹åœ¨AnimateDiffä¹‹å¤–ä¹Ÿå¯ä½¿ç”¨ã€‚è¯·é˜…è¯»AnimateDiffä»“åº“çš„READMEå’ŒWikiï¼Œä»¥äº†è§£æ›´å¤šå…³äºå…¶æ ¸å¿ƒå·¥ä½œåŸç†çš„ä¿¡æ¯ã€‚

AnimateDiffå·¥ä½œæµç¨‹é€šå¸¸ä¼šç”¨åˆ°ä»¥ä¸‹æœ‰ç”¨çš„èŠ‚ç‚¹åŒ…ï¼š
- [ComfyUI_FizzNodes](https://github.com/FizzleDorf/ComfyUI_FizzNodes)ï¼Œæä¾›BatchPromptScheduleèŠ‚ç‚¹çš„æç¤ºæ—…è¡ŒåŠŸèƒ½ã€‚ç”±FizzleDorfç»´æŠ¤ã€‚
- [ComfyUI-Advanced-ControlNet](https://github.com/Kosinkadink/ComfyUI-Advanced-ControlNet)ï¼Œç”¨äºä½¿ControlNetsä¸ä¸Šä¸‹æ–‡é€‰é¡¹é…åˆå·¥ä½œï¼Œå¹¶æ§åˆ¶å“ªäº›æ½œåœ¨å› ç´ åº”å—åˆ°ControlNetè¾“å…¥çš„å½±å“ã€‚åŒ…æ‹¬SparseCtrlæ”¯æŒã€‚ç”±æˆ‘ç»´æŠ¤ã€‚
- [ComfyUI-VideoHelperSuite](https://github.com/Kosinkadink/ComfyUI-VideoHelperSuite)ï¼Œç”¨äºåŠ è½½è§†é¢‘ï¼Œå°†å›¾åƒåˆæˆä¸ºè§†é¢‘ï¼Œä»¥åŠè¿›è¡Œå„ç§å›¾åƒ/æ½œåœ¨æ“ä½œï¼Œå¦‚è¿½åŠ ã€åˆ†å‰²ã€å¤åˆ¶ã€é€‰æ‹©æˆ–è®¡æ•°ã€‚ç”±AustinMrozå’Œæˆ‘ç§¯æç»´æŠ¤ã€‚
- [comfyui_controlnet_aux](https://github.com/Fannovel16/comfyui_controlnet_aux)ï¼Œæä¾›vanilla ComfyUIä¸­ä¸å­˜åœ¨çš„ControlNeté¢„å¤„ç†å™¨ã€‚ç”±Fannovel16ç»´æŠ¤ã€‚
- [ComfyUI_IPAdapter_plus](https://github.com/cubiq/ComfyUI_IPAdapter_plus)ï¼Œç”¨äºIPAdapteræ”¯æŒã€‚ç”±cubiq (matt3o)ç»´æŠ¤ã€‚
- [ComfyUI-KJNodes](https://github.com/kijai/ComfyUI-KJNodes)ï¼Œæä¾›åŒ…æ‹¬ä¸ºåŠ¨ç”»GLIGENé€‰æ‹©åæ ‡åœ¨å†…çš„æ‚é¡¹èŠ‚ç‚¹ã€‚ç”±kijaiç»´æŠ¤ã€‚

# å®‰è£…

## å¦‚æœä½¿ç”¨ ComfyUI Managerï¼š

1. æŸ¥æ‰¾ ```AnimateDiff Evolved```ï¼Œå¹¶ç¡®ä¿ä½œè€…æ˜¯ ```Kosinkadink```ã€‚å®‰è£…å®ƒã€‚
![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/2c7f29e1-d024-49e1-9eb0-d38070142584)


## å¦‚æœæ‰‹åŠ¨å®‰è£…ï¼š
1. å°†æ­¤ä»“åº“å…‹éš†åˆ° `custom_nodes` æ–‡ä»¶å¤¹ä¸­ã€‚

# æ¨¡å‹è®¾ç½®ï¼š
1. ä¸‹è½½è¿åŠ¨æ¨¡å—ã€‚æ‚¨è‡³å°‘éœ€è¦ä¸€ä¸ªã€‚ä¸åŒçš„æ¨¡å—ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚
   - åŸå§‹æ¨¡å‹ ```mm_sd_v14```, ```mm_sd_v15```, ```mm_sd_v15_v2```, ```v3_sd15_mm```: [HuggingFace](https://huggingface.co/guoyww/animatediff/tree/cd71ae134a27ec6008b968d6419952b0c0494cf2) | [Google Drive](https://drive.google.com/drive/folders/1EqLC65eR1-W-sGD0Im7fkED6c8GkiNFI) | [CivitAI](https://civitai.com/models/108836)
   - ```mm_sd_v14``` çš„ç¨³å®šå¾®è°ƒç‰ˆæœ¬ï¼Œ```mm-Stabilized_mid``` å’Œ ```mm-Stabilized_high```ï¼Œç”± **manshoety** æä¾›ï¼š[HuggingFace](https://huggingface.co/manshoety/AD_Stabilized_Motion/tree/main)
   - ```mm_sd_v15_v2``` çš„å¾®è°ƒç‰ˆæœ¬ï¼Œ```mm-p_0.5.pth``` å’Œ ```mm-p_0.75.pth```ï¼Œç”± **manshoety** æä¾›ï¼š[HuggingFace](https://huggingface.co/manshoety/beta_testing_models/tree/main)
   - æ›´é«˜åˆ†è¾¨ç‡çš„å¾®è°ƒç‰ˆæœ¬ï¼Œ```temporaldiff-v1-animatediff``` ç”± **CiaraRowles** æä¾›ï¼š[HuggingFace](https://huggingface.co/CiaraRowles/TemporalDiff/tree/main)
   - åŸå§‹è¿åŠ¨æ¨¡å‹çš„ FP16/safetensor ç‰ˆæœ¬ï¼Œç”± **continue-revolution** æ‰˜ç®¡ï¼ˆå ç”¨è¾ƒå°‘çš„å­˜å‚¨ç©ºé—´ï¼Œä½†ä½¿ç”¨ç›¸åŒçš„ VRAMï¼Œå› ä¸º ComfyUI é»˜è®¤ä»¥ fp16 åŠ è½½æ¨¡å‹ï¼‰ï¼š[HuffingFace](https://huggingface.co/conrevo/AnimateDiff-A1111/tree/main)
2. å°†æ¨¡å‹æ”¾ç½®åœ¨è¿™äº›ä½ç½®ä¹‹ä¸€ï¼ˆå¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡å‘½åæ¨¡å‹ï¼‰ï¼š
   - ```ComfyUI/custom_nodes/ComfyUI-AnimateDiff-Evolved/models```
   - ```ComfyUI/models/animatediff_models```
3. å¯é€‰åœ°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Motion LoRAs æ¥å½±å“åŸºäº v2 çš„è¿åŠ¨æ¨¡å‹ï¼Œå¦‚ mm_sd_v15_v2 çš„è¿åŠ¨ã€‚
   - [Google Drive](https://drive.google.com/drive/folders/1EqLC65eR1-W-sGD0Im7fkED6c8GkiNFI?usp=sharing) | [HuggingFace](https://huggingface.co/guoyww/animatediff) | [CivitAI](https://civitai.com/models/108836/animatediff-motion-modules)
   - å°† Motion LoRAs æ”¾ç½®åœ¨è¿™äº›ä½ç½®ä¹‹ä¸€ï¼ˆå¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡å‘½å Motion LoRAsï¼‰ï¼š
      - ```ComfyUI/custom_nodes/ComfyUI-AnimateDiff-Evolved/motion_lora```
      - ```ComfyUI/models/animatediff_motion_lora```
4. å‘æŒ¥åˆ›æ„ï¼å¦‚æœå®ƒé€‚ç”¨äºæ­£å¸¸çš„å›¾åƒç”Ÿæˆï¼Œé‚£ä¹ˆå®ƒï¼ˆå¾ˆå¯èƒ½ï¼‰ä¹Ÿé€‚ç”¨äº AnimateDiff ç”Ÿæˆã€‚æ½œåœ¨çš„ä¸Šé‡‡æ ·ï¼Ÿå»å°è¯•å§ã€‚ControlNetsï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå †å ï¼Ÿå½“ç„¶å¯ä»¥ã€‚å°† ControlNets çš„æ¡ä»¶æ©ç ä»…å½±å“åŠ¨ç”»çš„ä¸€éƒ¨åˆ†ï¼Ÿå½“ç„¶å¯ä»¥ã€‚å°è¯•å„ç§æ–¹æ³•ï¼Œä½ ä¼šæƒŠè®¶äºä½ èƒ½åšåˆ°çš„äº‹æƒ…ã€‚ä¸‹é¢åŒ…å«äº†ä¸€äº›å¸¦æœ‰å·¥ä½œæµç¨‹çš„ç¤ºä¾‹ã€‚

æ³¨æ„ï¼šæ‚¨è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ ComfyUI çš„ ```extra_model_paths.yaml``` æ–‡ä»¶æ¥ä½¿ç”¨è‡ªå®šä¹‰æ¨¡å‹/motion lora ä½ç½®ã€‚è¿åŠ¨æ¨¡å‹æ–‡ä»¶å¤¹çš„ ID æ˜¯ ```animatediff_models```ï¼Œmotion lora æ–‡ä»¶å¤¹çš„ ID æ˜¯ ```animatediff_motion_lora```ã€‚


# åŠŸèƒ½
- å…¼å®¹å‡ ä¹ä»»ä½•åŸç‰ˆæˆ–è‡ªå®šä¹‰çš„ KSampler èŠ‚ç‚¹ã€‚
- æ”¯æŒ ControlNetã€SparseCtrl å’Œ IPAdapter
- é€šè¿‡åœ¨æ•´ä¸ª unet ä¸Šæ»‘åŠ¨ä¸Šä¸‹æ–‡çª—å£ï¼ˆä¸Šä¸‹æ–‡é€‰é¡¹ï¼‰å’Œ/æˆ–åœ¨è¿åŠ¨æ¨¡å—å†…ï¼ˆè§†å›¾é€‰é¡¹ï¼‰å®ç°æ— é™åŠ¨ç”»é•¿åº¦æ”¯æŒ
- è°ƒåº¦ä¸Šä¸‹æ–‡é€‰é¡¹ï¼Œä»¥åœ¨é‡‡æ ·è¿‡ç¨‹ä¸­çš„ä¸åŒç‚¹è¿›è¡Œæ›´æ”¹
- æ”¯æŒ FreeInit å’Œ FreeNoiseï¼ˆFreeInit åœ¨è¿­ä»£é€‰é¡¹ä¸‹ï¼ŒFreeNoise åœ¨ SampleSettings çš„ noise_type ä¸‹æ‹‰èœå•ä¸­ï¼‰
- ä» [åŸå§‹ AnimateDiff ä»“åº“](https://github.com/guoyww/animatediff/) å®ç°çš„æ··åˆ Motion LoRAsã€‚æ³¨æ„ï¼šåŸå§‹çš„ LoRAs å®é™…ä¸Šåªé€‚ç”¨äºåŸºäº v2 çš„è¿åŠ¨æ¨¡å‹ï¼Œå¦‚ ```mm_sd_v15_v2```, ```mm-p_0.5.pth```, å’Œ ```mm-p_0.75.pth```ã€‚
     - æ›´æ–°ï¼šç°åœ¨å¯ä»¥é€šè¿‡ [AnimateDiff-MotionDirector ä»“åº“](https://github.com/ExponentialML/AnimateDiff-MotionDirector) è®­ç»ƒæ²¡æœ‰ v2 é™åˆ¶çš„æ–° Motion LoRAsã€‚æ„Ÿè°¢ ExponentialML ä¸º AnimateDiff ç›®çš„å®ç° MotionDirectorï¼
- ä½¿ç”¨ [ComfyUI_FizzNodes](https://github.com/FizzleDorf/ComfyUI_FizzNodes) ä¸­çš„ BatchPromptSchedule èŠ‚ç‚¹è¿›è¡Œæç¤ºæ—…è¡Œ
- é€šè¿‡ Scale å’Œ Effect å¤šå€¼è¾“å…¥æ§åˆ¶è¿åŠ¨é‡å’Œè¿åŠ¨æ¨¡å‹å¯¹ç”Ÿæˆçš„å½±å“ã€‚
     - å¯ä»¥æ˜¯æµ®ç‚¹æ•°ã€æµ®ç‚¹æ•°åˆ—è¡¨æˆ–æ©ç 
- é€šè¿‡å™ªå£°ç±»å‹ã€å™ªå£°å±‚å’Œç§å­è¦†ç›–/åç§»/æ‰¹é‡åç§»åœ¨ Sample Settings å’Œç›¸å…³èŠ‚ç‚¹ä¸­è¿›è¡Œè‡ªå®šä¹‰å™ªå£°è°ƒåº¦
- æ”¯æŒ AnimateDiff æ¨¡å‹ v1/v2/v3
- é€šè¿‡ Gen2 èŠ‚ç‚¹åŒæ—¶ä½¿ç”¨å¤šä¸ªè¿åŠ¨æ¨¡å‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½æ”¯æŒï¼‰
- æ”¯æŒ [HotshotXL](https://huggingface.co/hotshotco/Hotshot-XL/tree/main)ï¼ˆä¸€ä¸ª SDXL è¿åŠ¨æ¨¡å—æ¶æ„ï¼‰ï¼Œ```hsxl_temporal_layers.safetensors```ã€‚
     - æ³¨æ„ï¼šæ‚¨éœ€è¦ä½¿ç”¨ ```autoselect``` æˆ– ```linear (HotshotXL/default)``` beta_scheduleï¼Œä¸Šä¸‹æ–‡é•¿åº¦æˆ–æ€»å¸§æ•°ï¼ˆä¸ä½¿ç”¨ä¸Šä¸‹æ–‡æ—¶ï¼‰çš„æœ€ä½³ç‚¹æ˜¯ 8 å¸§ï¼Œå¹¶ä¸”æ‚¨éœ€è¦ä½¿ç”¨ SDXL æ£€æŸ¥ç‚¹ã€‚
- æ”¯æŒ [AnimateDiff-SDXL](https://github.com/guoyww/AnimateDiff/)ï¼Œå¯¹åº”æ¨¡å‹ã€‚ç»è¿‡å‡ ä¸ªæœˆçš„æµ‹è¯•ï¼Œä»å¤„äºæµ‹è¯•é˜¶æ®µã€‚
     - æ³¨æ„ï¼šæ‚¨éœ€è¦ä½¿ç”¨ ```autoselect``` æˆ– ```linear (AnimateDiff-SDXL)``` beta_scheduleã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒAnimateDiff-SDXL çš„è§„åˆ™ä¸ AnimateDiff ç›¸åŒã€‚
- æ”¯æŒ [AnimateLCM](https://huggingface.co/wangfuyun/AnimateLCM)
     - æ³¨æ„ï¼šæ‚¨éœ€è¦ä½¿ç”¨ ```autoselect``` æˆ– ```lcm``` æˆ– ```lcm[100_ots]``` beta_scheduleã€‚è¦å®Œå…¨ä½¿ç”¨ LCMï¼Œè¯·ç¡®ä¿ä½¿ç”¨é€‚å½“çš„ LCM loraï¼Œåœ¨ KSampler èŠ‚ç‚¹ä¸­ä½¿ç”¨ ```lcm``` sampler_nameï¼Œå¹¶å°† cfg é™ä½åˆ° 1.0 åˆ° 2.0 ä¹‹é—´ã€‚ä¸è¦å¿˜è®°å‡å°‘æ­¥éª¤ï¼ˆæœ€å°å€¼ = ~4 æ­¥ï¼‰ï¼Œå› ä¸º LCM æ”¶æ•›æ›´å¿«ï¼ˆæ­¥éª¤æ›´å°‘ï¼‰ã€‚æ ¹æ®éœ€è¦å¢åŠ æ­¥éª¤æ•°ä»¥å¢åŠ ç»†èŠ‚ã€‚
- æ”¯æŒ [AnimateLCM-I2V](https://huggingface.co/wangfuyun/AnimateLCM-I2V)ï¼Œéå¸¸æ„Ÿè°¢ [Fu-Yun Wang](https://github.com/G-U-N) åœ¨æˆ‘æ’°å†™è®ºæ–‡æœŸé—´æä¾›çš„åŸå§‹ diffusers ä»£ç 
     - æ³¨æ„ï¼šéœ€è¦ä¸ä¸Šè¿° AnimateLCM ç›¸åŒçš„è®¾ç½®ã€‚éœ€è¦ä½¿ç”¨ ```Apply AnimateLCM-I2V Model``` Gen2 èŠ‚ç‚¹ï¼Œä»¥ä¾¿æä¾› ```ref_latent```ï¼›ä½¿ç”¨ ```Scale Ref Image and VAE Encode``` èŠ‚ç‚¹é¢„å¤„ç†è¾“å…¥å›¾åƒã€‚è™½ç„¶è¿™åŸæœ¬æ˜¯ä¸€ä¸ª img2video æ¨¡å‹ï¼Œä½†æˆ‘å‘ç°å®ƒåœ¨ ```ref_drift=0.0``` çš„æƒ…å†µä¸‹æœ€é€‚åˆ vid2vid ç›®çš„ï¼Œå¹¶ä¸”åœ¨åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å‹ä¹‹å‰è‡³å°‘ä½¿ç”¨ 1 æ­¥ï¼Œé€šè¿‡ä¸å…¶ä»– Apply AnimateDiff Model (Adv.) èŠ‚ç‚¹ä¸²è”ã€‚```apply_ref_when_disabled``` å¯ä»¥è®¾ç½®ä¸º Trueï¼Œä»¥å…è®¸ img_encoder åœ¨è¾¾åˆ° ```end_percent``` æ—¶ç»§ç»­å·¥ä½œã€‚AnimateLCM-I2V åœ¨æ›´é«˜åˆ†è¾¨ç‡ä¸‹ä¿æŒä¸€è‡´æ€§ä¹Ÿéå¸¸æœ‰ç”¨ï¼ˆåœ¨æ¿€æ´» ControlNet å’Œ SD LoRAs çš„æƒ…å†µä¸‹ï¼Œæˆ‘å¯ä»¥è½»æ¾åœ°ä» 512x512 æºä¸€æ¬¡æ€§ä¸Šé‡‡æ ·åˆ° 1024x1024ï¼‰ã€‚å¾…åŠäº‹é¡¹ï¼šæ·»åŠ ç¤ºä¾‹
- æ”¯æŒ [CameraCtrl](https://github.com/hehao13/CameraCtrl)ï¼Œæ‚¨å¿…é¡»åœ¨è¿™é‡Œä½¿ç”¨çš„ä¿®å‰ªæ¨¡å‹ï¼š[CameraCtrl_pruned.safetensors](https://huggingface.co/Kosinkadink/CameraCtrl/tree/main)
     - æ³¨æ„ï¼šéœ€è¦ AnimateDiff SD1.5 æ¨¡å‹ï¼Œå¹¶ä¸”ä¸“é—¨ä¸º v3 æ¨¡å‹è®­ç»ƒã€‚ä»…é™ Gen2ï¼Œæä¾›äº† Gen2/CameraCtrl å­èœå•ä¸‹çš„è¾…åŠ©èŠ‚ç‚¹ã€‚
- æ”¯æŒ [PIA](https://github.com/open-mmlab/PIA)ï¼Œæ¨¡å‹ [pia.ckpt](https://huggingface.co/Leoxing/PIA/tree/main)
     - æ³¨æ„ï¼šæ‚¨éœ€è¦ä½¿ç”¨ ```autoselect``` æˆ– ```sqrt_linear (AnimateDiff)``` beta_scheduleã€‚å¦‚æœéœ€è¦å®é™…æä¾›è¾“å…¥å›¾åƒï¼Œéœ€è¦ä½¿ç”¨ ```Apply AnimateDiff-PIA Model``` Gen2 èŠ‚ç‚¹ã€‚```pia_input``` å¯ä»¥é€šè¿‡è®ºæ–‡é¢„è®¾ï¼ˆ```PIA Input [Paper Presets]```ï¼‰æˆ–æ‰‹åŠ¨è¾“å…¥å€¼ï¼ˆ```PIA Input [Multival]```ï¼‰æä¾›ã€‚
- åœ¨é‡‡æ ·è¿‡ç¨‹ä¸­çš„ä¸åŒç‚¹æ›´æ”¹ Scale å’Œ Effect çš„ AnimateDiff å…³é”®å¸§ã€‚
- æ”¯æŒ fp8ï¼›éœ€è¦æœ€æ–°çš„ ComfyUI å’Œ torch >= 2.1ï¼ˆå‡å°‘ VRAM ä½¿ç”¨ï¼Œä½†æ”¹å˜è¾“å‡ºï¼‰
- æ”¯æŒ Mac M1/M2/M3
- é€šè¿‡ Gen2 Use Evolved Sampling èŠ‚ç‚¹åœ¨ AnimateDiff ä¹‹å¤–ä½¿ç”¨ä¸Šä¸‹æ–‡é€‰é¡¹å’Œé‡‡æ ·è®¾ç½®
- é€šè¿‡ LoRA Hooks æ”¯æŒå¯æ©ç å’Œå¯è°ƒåº¦çš„ SD LoRAï¼ˆä»¥åŠæ¨¡å‹ä½œä¸º LoRAï¼‰ç”¨äº AnimateDiff å’Œ StableDiffusion
- æ¯å¸§ GLIGEN åæ ‡æ§åˆ¶
     - ç›®å‰éœ€è¦ KJNodes ä¸­çš„ GLIGENTextBoxApplyBatch æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½†æˆ‘å¾ˆå¿«ä¼šæ·»åŠ åŸç”ŸèŠ‚ç‚¹æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚
- é‡‡æ ·è¿‡ç¨‹ä¸­æ³¨å…¥å›¾åƒ

## å³å°†æ¨å‡ºçš„åŠŸèƒ½
- ä¸º AnimateDiff-Evolved ä»“åº“ä¸­çš„**æ¯ä¸ªåŠŸèƒ½**æä¾›ç¤ºä¾‹å·¥ä½œæµç¨‹ï¼Œå¹¶å¸Œæœ›åˆ¶ä½œä¸€ä¸ªé•¿é•¿çš„ Youtube è§†é¢‘å±•ç¤ºæ‰€æœ‰åŠŸèƒ½ï¼ˆç›®æ ‡ï¼šåœ¨ Elden Ring DLC å‘å¸ƒä¹‹å‰å®Œæˆã€‚ç›®å‰æ­£åœ¨åŠªåŠ›ä¸­ã€‚ï¼‰
- æ”¯æŒ [UniCtrl](https://github.com/XuweiyiChen/UniCtrl)
- æ”¯æŒ Unet-Refï¼Œä»¥ä¾¿å¯ä»¥å°†å¤§é‡è®ºæ–‡ç§»æ¤è¿‡æ¥
- å®ç° [StoryDiffusion](https://github.com/HVision-NKU/StoryDiffusion)
- åˆå¹¶è¿åŠ¨æ¨¡å‹æƒé‡/ç»„ä»¶ï¼ŒåŒ…æ‹¬æ¯ä¸ªå—çš„è‡ªå®šä¹‰
- å¯æ©ç çš„ Motion LoRA
- å¯è°ƒåº¦æ—¶é—´æ­¥çš„ GLIGEN åæ ‡
- åŠ¨æ€å†…å­˜ç®¡ç†ï¼Œç”¨äºåœ¨ä¸åŒçš„ start/end_percents åŠ è½½/å¸è½½è¿åŠ¨æ¨¡å‹
- å†…ç½®æç¤ºæ—…è¡Œå®ç°
- ä»»ä½•å…¶ä»–ä¸ AnimateDiff ç›¸å…³çš„æ–°åŠŸèƒ½


# åŸºæœ¬ç”¨æ³•å’ŒèŠ‚ç‚¹

æœ‰ä¸¤ç§ç±»å‹çš„èŠ‚ç‚¹å¯ä»¥ç”¨äºä½¿ç”¨ AnimateDiff/Evolved Sampling - **Gen1** å’Œ **Gen2**ã€‚é™¤äº†ç‰¹åˆ«æ ‡è®°ä¸º Gen1/Gen2 çš„èŠ‚ç‚¹å¤–ï¼Œæ‰€æœ‰å…¶ä»–èŠ‚ç‚¹éƒ½å¯ä»¥ç”¨äº Gen1 å’Œ Gen2ã€‚

Gen1 å’Œ Gen2 äº§ç”Ÿå®Œå…¨ç›¸åŒçš„ç»“æœï¼ˆåç«¯ä»£ç ç›¸åŒï¼‰ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºä½¿ç”¨æ¨¡å¼çš„æ–¹å¼ã€‚æ€»çš„æ¥è¯´ï¼ŒGen1 æ˜¯ä½¿ç”¨åŸºæœ¬ AnimateDiff åŠŸèƒ½çš„æœ€ç®€å•æ–¹å¼ï¼Œè€Œ Gen2 å°†æ¨¡å‹åŠ è½½å’Œåº”ç”¨ä¸ Evolved Sampling åŠŸèƒ½åˆ†å¼€ã€‚è¿™æ„å‘³ç€åœ¨å®è·µä¸­ï¼ŒGen2 çš„ Use Evolved Sampling èŠ‚ç‚¹å¯ä»¥åœ¨æ²¡æœ‰æ¨¡å‹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå…è®¸åœ¨ä¸ä½¿ç”¨ AnimateDiff çš„æƒ…å†µä¸‹ä½¿ç”¨ä¸Šä¸‹æ–‡é€‰é¡¹å’Œé‡‡æ ·è®¾ç½®ã€‚

åœ¨ä»¥ä¸‹æ–‡æ¡£ä¸­ï¼Œè¾“å…¥/è¾“å‡ºå°†æŒ‰ä»¥ä¸‹é¢œè‰²ç¼–ç ï¼š
- ğŸŸ© - å¿…éœ€è¾“å…¥
- ğŸŸ¨ - å¯é€‰è¾“å…¥
- ğŸŸ¦ - å¼€å§‹ä½œä¸ºå°éƒ¨ä»¶ï¼Œå¯ä»¥è½¬æ¢ä¸ºè¾“å…¥
- ğŸŸª - è¾“å‡º

## Gen1/Gen2 èŠ‚ç‚¹

| â‘  Gen1 â‘  | â‘¡ Gen2 â‘¡ |
|---|---|
| - ä¸€ä½“åŒ–èŠ‚ç‚¹<br/> - å¦‚æœåŒä¸€ä¸ªæ¨¡å‹è¢«å¤šä¸ª Gen1 èŠ‚ç‚¹åŠ è½½ï¼Œä¼šå¯¼è‡´ RAM é‡å¤ä½¿ç”¨ã€‚ | - å°†æ¨¡å‹åŠ è½½ä¸åº”ç”¨å’Œ Evolved Sampling åˆ†ç¦»<br/> - åœ¨æ²¡æœ‰è¿åŠ¨æ¨¡å‹çš„æƒ…å†µä¸‹å¯ç”¨ Evolved Sampling åŠŸèƒ½<br/> - é€šè¿‡ Apply AnimateDiff Model (Adv.) èŠ‚ç‚¹å¯ç”¨å¤šä¸ªè¿åŠ¨æ¨¡å‹çš„ä½¿ç”¨ |
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a94029fd-5e74-467b-853c-c3ec4cf8a321) | ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8c050151-6cfb-4350-932d-a105af78a1ec) |
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c7ae9ef3-b5cd-4800-b249-da2cb73c4c1e) | ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/cffa21f7-0e33-45d1-9950-ad22eb229134) |


### è¾“å…¥
- ğŸŸ©*model*: StableDiffusion (SD) æ¨¡å‹è¾“å…¥ã€‚
- ğŸŸ¦*model_name*: AnimateDiff (AD) æ¨¡å‹ï¼Œåœ¨é‡‡æ ·è¿‡ç¨‹ä¸­åŠ è½½å’Œ/æˆ–åº”ç”¨ã€‚æŸäº›è¿åŠ¨æ¨¡å‹é€‚ç”¨äº SD1.5ï¼Œè€Œå…¶ä»–æ¨¡å‹é€‚ç”¨äº SDXLã€‚
- ğŸŸ¦*beta_schedule*: å°†é€‰å®šçš„ beta_schedule åº”ç”¨äº SD æ¨¡å‹ï¼›```autoselect``` å°†è‡ªåŠ¨ä¸ºé€‰å®šçš„è¿åŠ¨æ¨¡å‹é€‰æ‹©æ¨èçš„ beta_schedule - æˆ–è€…å¦‚æœæ²¡æœ‰ä¸º Gen2 é€‰æ‹©è¿åŠ¨æ¨¡å‹ï¼Œåˆ™ä½¿ç”¨ç°æœ‰çš„ beta_scheduleã€‚
- ğŸŸ¨*context_options*: æ¥è‡ª context_opts å­èœå•çš„ Context Options èŠ‚ç‚¹ - å½“éœ€è¦å›åˆ° AnimateDiff æ¨¡å‹çš„æœ€ä½³ç‚¹æ—¶åº”è¯¥ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰è¿åŠ¨æ¨¡å‹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼ˆä»…é™ Gen2ï¼‰ã€‚
- ğŸŸ¨*sample_settings*: Sample Settings èŠ‚ç‚¹è¾“å…¥ - ç”¨äºåº”ç”¨è‡ªå®šä¹‰é‡‡æ ·é€‰é¡¹ï¼Œå¦‚ FreeNoiseï¼ˆnoise_typeï¼‰ã€FreeInitï¼ˆiter_optsï¼‰ã€è‡ªå®šä¹‰ç§å­ã€å™ªå£°å±‚ç­‰ã€‚ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰è¿åŠ¨æ¨¡å‹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼ˆä»…é™ Gen2ï¼‰ã€‚
- ğŸŸ¨*motion_lora*: å¯¹äºåŸºäº v2 çš„æ¨¡å‹ï¼ŒMotion LoRA å°†å½±å“ç”Ÿæˆçš„è¿åŠ¨ã€‚åªæœ‰å°‘æ•°å®˜æ–¹ motion LoRAs è¢«å‘å¸ƒ - å¾ˆå¿«ï¼Œæˆ‘å°†ä¸å…¶ä»–ç¤¾åŒºæˆå‘˜åˆä½œï¼Œåˆ›å»ºè®­ç»ƒä»£ç æ¥åˆ›å»ºï¼ˆå¹¶æµ‹è¯•ï¼‰æ–°çš„ Motion LoRAsï¼Œè¿™äº› LoRAs å¯èƒ½é€‚ç”¨äºé v2 æ¨¡å‹ã€‚
- ğŸŸ¨*ad_settings*: åœ¨åŠ è½½è¿‡ç¨‹ä¸­ä¿®æ”¹è¿åŠ¨æ¨¡å‹ï¼Œå…è®¸è°ƒæ•´ä½ç½®ç¼–ç å™¨ï¼ˆPEsï¼‰ä»¥æ‰©å±•æ¨¡å‹çš„æœ€ä½³ç‚¹æˆ–ä¿®æ”¹æ•´ä½“è¿åŠ¨ã€‚
- ğŸŸ¨*ad_keyframes*: å…è®¸åœ¨é‡‡æ ·æ—¶é—´æ­¥é•¿ä¸Šè°ƒåº¦ ```scale_multival``` å’Œ ```effect_multival``` è¾“å…¥ã€‚
- ğŸŸ¨*scale_multival*: ä½¿ç”¨ ```Multival``` è¾“å…¥ï¼ˆé»˜è®¤ä¸º ```1.0```ï¼‰ã€‚ä»¥å‰ç§°ä¸º motion_scaleï¼Œå®ƒç›´æ¥å½±å“æ¨¡å‹ç”Ÿæˆçš„è¿åŠ¨é‡ã€‚é€šè¿‡ Multival èŠ‚ç‚¹ï¼Œå®ƒå¯ä»¥æ¥å—æµ®ç‚¹æ•°ã€æµ®ç‚¹æ•°åˆ—è¡¨å’Œ/æˆ–æ©ç è¾“å…¥ï¼Œå…è®¸ä¸ä»…å¯¹ä¸åŒå¸§ï¼Œè€Œä¸”å¯¹å¸§çš„ä¸åŒåŒºåŸŸï¼ˆåŒ…æ‹¬æ¯å¸§ï¼‰åº”ç”¨ä¸åŒçš„æ¯”ä¾‹ã€‚
- ğŸŸ¨*effect_multival*: ä½¿ç”¨ ```Multival``` è¾“å…¥ï¼ˆé»˜è®¤ä¸º ```1.0```ï¼‰ã€‚ç¡®å®šè¿åŠ¨æ¨¡å‹å¯¹é‡‡æ ·è¿‡ç¨‹çš„å½±å“ã€‚å€¼ä¸º ```0.0``` ç›¸å½“äºæ²¡æœ‰ AnimateDiff å½±å“çš„æ­£å¸¸ SD è¾“å‡ºã€‚é€šè¿‡ Multival èŠ‚ç‚¹ï¼Œå®ƒå¯ä»¥æ¥å—æµ®ç‚¹æ•°ã€æµ®ç‚¹æ•°åˆ—è¡¨å’Œ/æˆ–æ©ç è¾“å…¥ï¼Œå…è®¸ä¸ä»…å¯¹ä¸åŒå¸§ï¼Œè€Œä¸”å¯¹å¸§çš„ä¸åŒåŒºåŸŸï¼ˆåŒ…æ‹¬æ¯å¸§ï¼‰åº”ç”¨ä¸åŒçš„æ•ˆæœé‡ã€‚

#### Gen2 ç‹¬æœ‰è¾“å…¥
- ğŸŸ¨*motion_model*: åŠ è½½çš„è¿åŠ¨æ¨¡å‹è¾“å…¥ã€‚
- ğŸŸ¨*m_models*: ä» Apply AnimateDiff Model èŠ‚ç‚¹è¾“å‡ºçš„ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰è¿åŠ¨æ¨¡å‹ã€‚

#### Gen2 Adv. ç‹¬æœ‰è¾“å…¥
- ğŸŸ¨*prev_m_models*: ä¸å½“å‰æ¨¡å‹ä¸€èµ·ä½¿ç”¨çš„å…ˆå‰åº”ç”¨çš„è¿åŠ¨æ¨¡å‹ã€‚
- ğŸŸ¨*start_percent*: ç¡®å®šè¿æ¥çš„è¿åŠ¨æ¨¡å‹ä½•æ—¶å¼€å§‹ç”Ÿæ•ˆï¼ˆä¼˜å…ˆäºä»»ä½• ad_keyframesï¼‰ã€‚
- ğŸŸ¨*end_percent*: ç¡®å®šè¿æ¥çš„è¿åŠ¨æ¨¡å‹ä½•æ—¶åœæ­¢ç”Ÿæ•ˆï¼ˆä¼˜å…ˆäºä»»ä½• ad_keyframesï¼‰ã€‚

#### Gen1 (Legacy) è¾“å…¥
- ğŸŸ¦*motion_scale*: ```scale_multival``` çš„æ—§ç‰ˆæœ¬ï¼Œåªèƒ½æ˜¯æµ®ç‚¹æ•°ã€‚
- ğŸŸ¦*apply_v2_models_properly*: å‘åå…¼å®¹çš„åˆ‡æ¢ï¼Œé€‚ç”¨äºå‡ ä¸ªæœˆå‰ä½¿ç”¨æœªå…³é—­ v2 æ¨¡å‹ç»„å½’ä¸€åŒ–hackä»£ç çš„å·¥ä½œæµç¨‹ã€‚**ä»…å½±å“ v2 æ¨¡å‹ï¼Œå…¶ä»–æ¨¡å‹ä¸å—å½±å“ã€‚** æ‰€æœ‰èŠ‚ç‚¹ç°åœ¨é»˜è®¤æ­¤å€¼ä¸º ```True```ã€‚

### è¾“å‡º
- ğŸŸª*MODEL*: æ³¨å…¥äº† Evolved Sampling/AnimateDiff çš„ SD æ¨¡å‹ã€‚

#### Gen2 ç‹¬æœ‰è¾“å‡º
- ğŸŸª*MOTION_MODEL*: åŠ è½½çš„è¿åŠ¨æ¨¡å‹ã€‚
- ğŸŸª*M_MODELS*: ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åº”ç”¨çš„è¿åŠ¨æ¨¡å‹ï¼Œå¯ä»¥æ’å…¥ Use Evolved Sampling æˆ–å¦ä¸€ä¸ª Apply AnimateDiff Model (Adv.) èŠ‚ç‚¹ã€‚


## Multival èŠ‚ç‚¹

å¯¹äº Multival è¾“å…¥ï¼Œè¿™äº›èŠ‚ç‚¹å…è®¸ä½¿ç”¨æµ®ç‚¹æ•°ã€æµ®ç‚¹æ•°åˆ—è¡¨å’Œ/æˆ–æ©ç ä½œä¸ºè¾“å…¥ã€‚Scaled Mask èŠ‚ç‚¹å…è®¸è‡ªå®šä¹‰æ©ç çš„æš—/äº®åŒºåŸŸï¼Œä»¥ç¡®å®šè¿™äº›åŒºåŸŸå¯¹åº”çš„å€¼ã€‚

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d4c6a63f-703a-402b-989e-ab4d04141c7a) | ğŸŸ¨*mask_optional*: ç”¨äºæµ®ç‚¹æ•°å€¼çš„æ©ç  - é»‘è‰²è¡¨ç¤º 0.0ï¼Œç™½è‰²è¡¨ç¤º 1.0ï¼ˆä¹˜ä»¥ float_valï¼‰ã€‚ <br/> ğŸŸ¦*float_val*: æµ®ç‚¹æ•°ä¹˜æ•°ã€‚|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/bc100bec-0407-47c8-aebd-f74f2417711e) | ğŸŸ©*mask*: ç”¨äºæµ®ç‚¹æ•°å€¼çš„æ©ç ã€‚ <br/> ğŸŸ¦*min_float_val*: æœ€å°å€¼ã€‚ <br/>ğŸŸ¦*max_float_val*: æœ€å¤§å€¼ã€‚ <br/> ğŸŸ¦*scaling*: å½“ ```absolute``` æ—¶ï¼Œé»‘è‰²è¡¨ç¤º min_float_valï¼Œç™½è‰²è¡¨ç¤º max_float_valã€‚å½“ ```relative``` æ—¶ï¼Œæ©ç ä¸­æœ€æš—çš„åŒºåŸŸï¼ˆæ€»ä½“ï¼‰è¡¨ç¤º min_float_valï¼Œæ©ç ä¸­æœ€äº®çš„åŒºåŸŸï¼ˆæ€»ä½“ï¼‰è¡¨ç¤º max_float_valã€‚ |


## AnimateDiff å…³é”®å¸§

å…è®¸ä¸º scale_multival å’Œ effect_multival å®‰æ’æ—¶é—´æ­¥é•¿ã€‚

ä¸¤ä¸ªè®¾ç½®æ¥ç¡®å®šè°ƒåº¦æ˜¯ ***start_percent*** å’Œ ***guarantee_steps***ã€‚å½“å¤šä¸ªå…³é”®å¸§å…·æœ‰ç›¸åŒçš„ start_percent æ—¶ï¼Œå®ƒä»¬å°†æŒ‰ç…§è¿æ¥çš„é¡ºåºæ‰§è¡Œï¼Œå¹¶åœ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰è¿è¡Œ guarantee_steps æ—¶é—´æ­¥é•¿ã€‚

| èŠ‚ç‚¹ |
|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/dca73cdc-157a-47db-bed2-6ba584dceccd) |

### è¾“å…¥
- ğŸŸ¨*prev_ad_keyframes*: é“¾å¼å…³é”®å¸§ä»¥åˆ›å»ºè°ƒåº¦ã€‚
- ğŸŸ¨*scale_multival*: æ­¤å…³é”®å¸§ä½¿ç”¨çš„ scale å€¼ã€‚
- ğŸŸ¨*effect_multival*: æ­¤å…³é”®å¸§ä½¿ç”¨çš„ effect å€¼ã€‚
- ğŸŸ¦*start_percent*: å¼€å§‹ä½¿ç”¨æ­¤å…³é”®å¸§çš„æ—¶é—´æ­¥é•¿ç™¾åˆ†æ¯”ã€‚å¦‚æœå¤šä¸ªå…³é”®å¸§å…·æœ‰ç›¸åŒçš„ start_percentï¼Œæ‰§è¡Œé¡ºåºç”±å®ƒä»¬çš„é“¾å¼é¡ºåºå†³å®šï¼Œå¹¶å°†æŒç»­ guarantee_steps æ—¶é—´æ­¥é•¿ã€‚
- ğŸŸ¦*guarantee_steps*: å…³é”®å¸§å°†ä½¿ç”¨çš„æœ€å°æ­¥æ•° - å½“è®¾ç½®ä¸º 0 æ—¶ï¼Œæ­¤å…³é”®å¸§ä»…åœ¨å½“å‰æ—¶é—´æ­¥é•¿æ²¡æœ‰æ›´å¥½çš„åŒ¹é…å…³é”®å¸§æ—¶ä½¿ç”¨ã€‚
- ğŸŸ¦*inherit_missing*: å½“è®¾ç½®ä¸º ```True``` æ—¶ï¼Œä»»ä½•ç¼ºå¤±çš„ scale_multival æˆ– effect_multival è¾“å…¥å°†ç»§æ‰¿å‰ä¸€ä¸ªå…³é”®å¸§çš„å€¼ - å¦‚æœå‰ä¸€ä¸ªå…³é”®å¸§ä¹Ÿç»§æ‰¿ç¼ºå¤±ï¼Œå°†ä½¿ç”¨æœ€åä¸€ä¸ªç»§æ‰¿çš„å€¼ã€‚


## ä¸Šä¸‹æ–‡é€‰é¡¹å’Œè§†å›¾é€‰é¡¹

è¿™äº›èŠ‚ç‚¹æä¾›äº†æ‰©å±•åŠ¨ç”»é•¿åº¦ä»¥å…‹æœ AnimateDiff æ¨¡å‹ï¼ˆé€šå¸¸ä¸º 16 å¸§ï¼‰å’Œ HotshotXL æ¨¡å‹ï¼ˆ8 å¸§ï¼‰æœ€ä½³ç‚¹é™åˆ¶çš„æŠ€æœ¯ã€‚

ä¸Šä¸‹æ–‡é€‰é¡¹é€šè¿‡ä¸€æ¬¡æ‰©æ•£åŠ¨ç”»çš„éƒ¨åˆ†å†…å®¹ï¼ŒåŒ…æ‹¬ä¸»è¦çš„ SD æ‰©æ•£ã€ControlNetsã€IPAdapters ç­‰ï¼Œæœ‰æ•ˆåœ°å°† VRAM ä½¿ç”¨é™åˆ¶ä¸ºç›¸å½“äº context_length æ½œåœ¨å˜é‡çš„ä½¿ç”¨ã€‚

ç›¸æ¯”ä¹‹ä¸‹ï¼Œè§†å›¾é€‰é¡¹é€šè¿‡å°†è¿åŠ¨æ¨¡å‹çœ‹åˆ°çš„æ½œåœ¨å˜é‡åˆ†æ®µæ¥å·¥ä½œã€‚è¿™å¹¶ä¸ä¼šå‡å°‘ VRAM ä½¿ç”¨ï¼Œä½†é€šå¸¸æ¯”ä¸Šä¸‹æ–‡é€‰é¡¹æ›´ç¨³å®šå’Œæ›´å¿«ï¼Œå› ä¸ºæ½œåœ¨å˜é‡ä¸éœ€è¦é€šè¿‡æ•´ä¸ª SD unetã€‚

ä¸Šä¸‹æ–‡é€‰é¡¹å’Œè§†å›¾é€‰é¡¹å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œä»¥è·å¾—ä¸¤è€…çš„æœ€ä½³æ•ˆæœ - å¯ä»¥ä½¿ç”¨æ›´é•¿çš„ context_length æ¥è·å¾—æ›´ç¨³å®šçš„è¾“å‡ºï¼Œä»£ä»·æ˜¯ä½¿ç”¨æ›´å¤šçš„ VRAMï¼ˆå› ä¸º context_length å†³å®šäº†åœ¨ GPU ä¸ŠåŒæ—¶è¿›è¡Œå¤šå°‘ SD é‡‡æ ·ï¼‰ã€‚å¦‚æœä½ æœ‰è¶³å¤Ÿçš„ VRAMï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»…è§†å›¾çš„ä¸Šä¸‹æ–‡é€‰é¡¹ï¼Œåªä½¿ç”¨è§†å›¾é€‰é¡¹ï¼ˆå¹¶è‡ªåŠ¨ä½¿ context_length ç­‰åŒäºå®Œæ•´çš„æ½œåœ¨å˜é‡ï¼‰ï¼Œä»¥æ¢å–æ›´é«˜çš„ VRAM ä½¿ç”¨æ¥è·å¾—é€Ÿåº¦æå‡ã€‚

æœ‰ä¸¤ç§ç±»å‹çš„ä¸Šä¸‹æ–‡/è§†å›¾é€‰é¡¹ï¼š***æ ‡å‡†*** å’Œ ***å¾ªç¯***ã€‚***æ ‡å‡†*** é€‰é¡¹ä¸ä¼šå¯¼è‡´è¾“å‡ºå¾ªç¯ã€‚***å¾ªç¯*** é€‰é¡¹ï¼Œé¡¾åæ€ä¹‰ï¼Œä¼šå¯¼è‡´è¾“å‡ºä»ç»“æŸåˆ°å¼€å§‹å¾ªç¯ã€‚åœ¨ä»£ç é‡æ„ä¹‹å‰ï¼Œå”¯ä¸€å¯ç”¨çš„ä¸Šä¸‹æ–‡æ˜¯å¾ªç¯ç±»å‹ã€‚

***æˆ‘å»ºè®®åœ¨ä¸éœ€è¦å¾ªç¯è¾“å‡ºæ—¶é¦–å…ˆä½¿ç”¨æ ‡å‡†é™æ€ã€‚***

åœ¨ä¸‹é¢çš„åŠ¨ç”»ä¸­ï¼Œ***ç»¿è‰²*** æ˜¾ç¤ºä¸Šä¸‹æ–‡ï¼Œ***çº¢è‰²*** æ˜¾ç¤ºè§†å›¾ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç»¿è‰²æ˜¯åŠ è½½åˆ° VRAMï¼ˆå¹¶é‡‡æ ·ï¼‰çš„æ½œåœ¨å˜é‡æ•°é‡ï¼Œè€Œçº¢è‰²æ˜¯æ¯æ¬¡ä¼ é€’ç»™è¿åŠ¨æ¨¡å‹çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚

### ä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†é™æ€
| è¡Œä¸º |
|---|
| ![anim__00005](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b26792d6-0f41-4f07-93aa-e5ee83f4d90e) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, context_length: 16, context_overlap: 4, æ€»æ­¥æ•°: 20)|

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a4a5f38e-3a1b-4328-9537-ad17567aed75) | ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*context_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> ğŸŸ¦*use_on_equal_length*: å½“ä¸º True æ—¶ï¼Œå…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•°åŒ¹é… context_length æ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚<br/> ğŸŸ¦*start_percent*: å½“å¤šä¸ªä¸Šä¸‹æ–‡é€‰é¡¹é“¾å¼è¿æ¥æ—¶ï¼Œå…è®¸è°ƒåº¦ã€‚<br/> ğŸŸ¦*guarantee_steps*: å½“è°ƒåº¦ä¸Šä¸‹æ–‡æ—¶ï¼Œç¡®å®šä¸Šä¸‹æ–‡åº”ä½¿ç”¨çš„*æœ€å°*é‡‡æ ·æ­¥æ•°ã€‚<br/> ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¨*prev_context*: å…è®¸ä¸Šä¸‹æ–‡é“¾å¼è¿æ¥ã€‚<br/> ğŸŸ¨*view_options*: å½“ context_length > view_lengthï¼ˆé™¤éå¦æœ‰æŒ‡å®šï¼‰æ—¶ï¼Œå…è®¸åœ¨æ¯ä¸ªä¸Šä¸‹æ–‡çª—å£å†…ä½¿ç”¨è§†å›¾é€‰é¡¹ã€‚|

### ä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†å‡åŒ€
| è¡Œä¸º |
|---|
| ![anim__00006](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/69707e3d-f49e-4368-89d5-616af2631594) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, context_length: 16, context_overlap: 4, context_stride: 1, æ€»æ­¥æ•°: 20) |
| ![anim__00010](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7fc083b4-406f-4809-94ca-b389784adcab) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, context_length: 16, context_overlap: 4, context_stride: 2, æ€»æ­¥æ•°: 20) |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c2c8c7ea-66b6-408d-be46-1d805ecd64d1) | ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*context_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*context_stride*: ç›¸é‚»æ½œåœ¨å˜é‡ä¹‹é—´çš„æœ€å¤§ 2^(stride-1) è·ç¦»ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> ğŸŸ¦*use_on_equal_length*: å½“ä¸º True æ—¶ï¼Œå…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•°åŒ¹é… context_length æ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚<br/> ğŸŸ¦*start_percent*: å½“å¤šä¸ªä¸Šä¸‹æ–‡é€‰é¡¹é“¾å¼è¿æ¥æ—¶ï¼Œå…è®¸è°ƒåº¦ã€‚<br/> ğŸŸ¦*guarantee_steps*: å½“è°ƒåº¦ä¸Šä¸‹æ–‡æ—¶ï¼Œç¡®å®šä¸Šä¸‹æ–‡åº”ä½¿ç”¨çš„*æœ€å°*é‡‡æ ·æ­¥æ•°ã€‚<br/> ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¨*prev_context*: å…è®¸ä¸Šä¸‹æ–‡é“¾å¼è¿æ¥ã€‚<br/> ğŸŸ¨*view_options*: å½“ context_length > view_lengthï¼ˆé™¤éå¦æœ‰æŒ‡å®šï¼‰æ—¶ï¼Œå…è®¸åœ¨æ¯ä¸ªä¸Šä¸‹æ–‡çª—å£å†…ä½¿ç”¨è§†å›¾é€‰é¡¹ã€‚|

### ä¸Šä¸‹æ–‡é€‰é¡¹â—†å¾ªç¯å‡åŒ€
| è¡Œä¸º |
|---|
| ![anim__00008](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d08ac1c9-2cec-4c9e-b257-0a804448d41b) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, context_length: 16, context_overlap: 4, context_stride: 1, closed_loop: False, æ€»æ­¥æ•°: 20) |
| ![anim__00009](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/61e0311b-b623-423f-bbcb-eb4eb02e9002) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, context_length: 16, context_overlap: 4, context_stride: 1, closed_loop: True, æ€»æ­¥æ•°: 20) |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c2c8c7ea-66b6-408d-be46-1d805ecd64d1) | ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*context_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*context_stride*: ç›¸é‚»æ½œåœ¨å˜é‡ä¹‹é—´çš„æœ€å¤§ 2^(stride-1) è·ç¦»ã€‚<br/> ğŸŸ¦*closed_loop*: å½“ä¸º True æ—¶ï¼Œæ·»åŠ é¢å¤–çš„çª—å£ä»¥å¢å¼ºå¾ªç¯ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> ğŸŸ¦*use_on_equal_length*: å½“ä¸º True æ—¶ï¼Œå…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•°åŒ¹é… context_length æ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡ - å…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•° == context_length æ—¶åˆ›å»ºå¾ªç¯ã€‚<br/> ğŸŸ¦*start_percent*: å½“å¤šä¸ªä¸Šä¸‹æ–‡é€‰é¡¹é“¾å¼è¿æ¥æ—¶ï¼Œå…è®¸è°ƒåº¦ã€‚<br/> ğŸŸ¦*guarantee_steps*: å½“è°ƒåº¦ä¸Šä¸‹æ–‡æ—¶ï¼Œç¡®å®šä¸Šä¸‹æ–‡åº”ä½¿ç”¨çš„*æœ€å°*é‡‡æ ·æ­¥æ•°ã€‚<br/> ğŸŸ¦*context_length*: ä¸€æ¬¡æ‰©æ•£çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¨*prev_context*: å…è®¸ä¸Šä¸‹æ–‡é“¾å¼è¿æ¥ã€‚<br/> ğŸŸ¨*view_options*: å½“ context_length > view_lengthï¼ˆé™¤éå¦æœ‰æŒ‡å®šï¼‰æ—¶ï¼Œå…è®¸åœ¨æ¯ä¸ªä¸Šä¸‹æ–‡çª—å£å†…ä½¿ç”¨è§†å›¾é€‰é¡¹ã€‚|

### ä¸Šä¸‹æ–‡é€‰é¡¹â—†ä»…è§†å›¾ [VRAMâ‡ˆ]
| è¡Œä¸º |
|---|
| ![anim__00011](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f2e422a4-c894-4e89-8f35-1964b89f369d) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, view_length: 16, view_overlap: 4, è§†å›¾é€‰é¡¹â—†æ ‡å‡†é™æ€, æ€»æ­¥æ•°: 20) |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8cd6a0a4-ee8a-46c3-b04b-a100f87025b3) | ğŸŸ©*view_opts_req*: ç”¨äºæ‰€æœ‰æ½œåœ¨å˜é‡çš„è§†å›¾é€‰é¡¹ã€‚ <br/> ğŸŸ¨*prev_context*: å…è®¸ä¸Šä¸‹æ–‡é“¾å¼è¿æ¥ã€‚<br/> |


è¿™äº›è°ƒåº¦æœ‰ç›¸åº”çš„è§†å›¾é€‰é¡¹ï¼š

### è§†å›¾é€‰é¡¹â—†æ ‡å‡†é™æ€
| è¡Œä¸º |
|---|
| ![anim__00012](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7aee4ccb-b669-42fd-a1b5-2005003d5f8d) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, view_length: 16, view_overlap: 4, ä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†é™æ€, context_length: 32, context_overlap: 8, æ€»æ­¥æ•°: 20) |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/4b22c73f-99cb-4781-bd33-e1b3db848207) | ğŸŸ¦*view_length*: ä¸€æ¬¡ä¼ é€’ç»™è¿åŠ¨æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸­çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*view_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> |

### è§†å›¾é€‰é¡¹â—†æ ‡å‡†å‡åŒ€
| è¡Œä¸º |
|---|
| ![anim__00015](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/faa2cd26-9f94-4fce-90b2-8acec84b444e ) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, view_length: 16, view_overlap: 4, view_stride: 1, ä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†é™æ€, context_length: 32, context_overlap: 8, æ€»æ­¥æ•°: 20) |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/bbf017e6-3545-4043-ba41-fcbe2f54496a) | ğŸŸ¦*view_length*: ä¸€æ¬¡ä¼ é€’ç»™è¿åŠ¨æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸­çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*view_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*view_stride*: ç›¸é‚»æ½œåœ¨å˜é‡ä¹‹é—´çš„æœ€å¤§ 2^(stride-1) è·ç¦»ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> |

### è§†å›¾é€‰é¡¹â—†å¾ªç¯å‡åŒ€
| è¡Œä¸º |
|---|
| ![anim__00016](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8922b44b-cb19-4b2a-8486-2df8a46bf573) <br/> (æ½œåœ¨å˜é‡è®¡æ•°: 64, view_length: 16, view_overlap: 4, view_stride: 1, closed_loop: False, ä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†é™æ€, context_length: 32, context_overlap: 8, æ€»æ­¥æ•°: 20) |
| æ³¨æ„ï¼šé™¤éä½ æœ‰ç‰¹å®šçš„åŸå› ä½¿ç”¨è¿™ä¸ªï¼Œå¦åˆ™è¿™ä¸ªå¯èƒ½ä¸ä¼šçœ‹èµ·æ¥å¾ˆå¥½ã€‚ |

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c58fe4d4-81a8-436b-8028-9e81c2ace18a) | ğŸŸ¦*view_length*: ä¸€æ¬¡ä¼ é€’ç»™è¿åŠ¨æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸­çš„æ½œåœ¨å˜é‡æ•°é‡ã€‚<br/> ğŸŸ¦*view_overlap*: ç›¸é‚»çª—å£ä¹‹é—´çš„æœ€å°å…¬å…±æ½œåœ¨å˜é‡ã€‚<br/> ğŸŸ¦*view_stride*: ç›¸é‚»æ½œåœ¨å˜é‡ä¹‹é—´çš„æœ€å¤§ 2^(stride-1) è·ç¦»ã€‚<br/> ğŸŸ¦*closed_loop*: å½“ä¸º True æ—¶ï¼Œæ·»åŠ é¢å¤–çš„çª—å£ä»¥å¢å¼ºå¾ªç¯ã€‚<br/> ğŸŸ¦*use_on_equal_length*: å½“ä¸º True æ—¶ï¼Œå…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•°åŒ¹é… context_length æ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡ - å…è®¸åœ¨æ½œåœ¨å˜é‡è®¡æ•° == context_length æ—¶åˆ›å»ºå¾ªç¯ã€‚<br/> ğŸŸ¦*fuse_method*: çª—å£ç»“æœå¹³å‡çš„æ–¹æ³•ã€‚<br/> |

## é‡‡æ ·è®¾ç½®

é‡‡æ ·è®¾ç½®èŠ‚ç‚¹å…è®¸è‡ªå®šä¹‰é‡‡æ ·è¿‡ç¨‹ï¼Œè¶…å‡ºå¤§å¤šæ•° KSampler èŠ‚ç‚¹æš´éœ²çš„å†…å®¹ã€‚ä½¿ç”¨å…¶é»˜è®¤å€¼ï¼Œå®ƒä¸ä¼šæœ‰ä»»ä½•æ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥å®‰å…¨åœ°é™„åŠ è€Œä¸æ”¹å˜ä»»ä½•è¡Œä¸ºã€‚

ç®€è€Œè¨€ä¹‹ï¼šè¦ä½¿ç”¨ FreeNoiseï¼Œä» noise_type ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© ```FreeNoise```ã€‚FreeNoise ä¸ä¼šä»¥ä»»ä½•æ–¹å¼é™ä½æ€§èƒ½ã€‚è¦ä½¿ç”¨ FreeInitï¼Œå°† FreeInit è¿­ä»£é€‰é¡¹é™„åŠ åˆ° iteration_opts è¾“å…¥ã€‚æ³¨æ„ï¼šFreeInitï¼Œå°½ç®¡å®ƒçš„åå­—ï¼Œé€šè¿‡é‡æ–°é‡‡æ ·æ½œåœ¨å˜é‡ ```iterations``` æ¬¡æ¥å·¥ä½œ - è¿™æ„å‘³ç€å¦‚æœä½ ä½¿ç”¨ iteration=2ï¼Œæ€»é‡‡æ ·æ—¶é—´å°†æ˜¯åŸæ¥çš„ä¸¤å€ï¼Œå› ä¸ºå®ƒå°†æ‰§è¡Œä¸¤æ¬¡é‡‡æ ·ã€‚

å…·æœ‰ç›¸åŒåç§°ï¼ˆæˆ–éå¸¸æ¥è¿‘ç›¸åŒåç§°ï¼‰è¾“å…¥çš„å™ªå£°å±‚å…·æœ‰ä¸é‡‡æ ·è®¾ç½®ç›¸åŒçš„é¢„æœŸè¡Œä¸º - è¯·å‚é˜…ä¸‹é¢çš„è¾“å…¥ã€‚

| èŠ‚ç‚¹ |
|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/563a13cf-7aed-4acc-9ce3-1556660a34c2) |

### è¾“å…¥
- ğŸŸ¨*noise_layers*: å¯è‡ªå®šä¹‰çš„ã€å¯å †å çš„å™ªå£°ï¼Œæ·»åŠ åˆ°/ä¿®æ”¹åˆå§‹å™ªå£°ã€‚
- ğŸŸ¨*iteration_opts*: ç¡®å®šæ˜¯å¦ï¼ˆä»¥åŠå¦‚ä½•ï¼‰è¿ç»­é‡å¤é‡‡æ ·çš„é€‰é¡¹ï¼›å¦‚æœä½ æƒ³æŸ¥çœ‹ FreeInitï¼Œè¿™å°±æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒã€‚
- ğŸŸ¨*seed_override*: æ¥å—ä¸€ä¸ªæ•´æ•°ä»¥ä½¿ç”¨ç§å­è€Œä¸æ˜¯ä¼ é€’ç»™ KSampler çš„ç§å­ï¼Œæˆ–ä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼ˆå¦‚é€šè¿‡ FizzNodes çš„ BatchedValueScheduleï¼‰ä¸ºæ‰¹æ¬¡ä¸­çš„æ¯ä¸ªæ½œåœ¨å˜é‡åˆ†é…å•ç‹¬çš„ç§å­ã€‚
- ğŸŸ¦*seed_offset*: å½“ä¸è®¾ç½®ä¸º 0 æ—¶ï¼Œå°†å€¼æ·»åŠ åˆ°å½“å‰ç§å­ï¼Œå¯é¢„æµ‹åœ°æ”¹å˜å®ƒï¼Œæ— è®ºåŸå§‹ç§å­æ˜¯ä»€ä¹ˆã€‚
- ğŸŸ¦*batch_offset*: å½“ä¸è®¾ç½®ä¸º 0 æ—¶ï¼Œå°†å™ªå£°â€œåç§»â€ï¼Œå°±å¥½åƒç¬¬ä¸€ä¸ªæ½œåœ¨å˜é‡å®é™…ä¸Šæ˜¯ batch_offset-nth æ½œåœ¨å˜é‡ï¼Œå°†æ‰€æœ‰å™ªå£°ç§»åŠ¨ã€‚
- ğŸŸ¦*noise_type*: é€‰æ‹©è¦ç”Ÿæˆçš„å™ªå£°ç±»å‹ã€‚å€¼åŒ…æ‹¬ï¼š
   - **default**: åƒå¾€å¸¸ä¸€æ ·ä¸ºæ‰€æœ‰æ½œåœ¨å˜é‡ç”Ÿæˆä¸åŒçš„å™ªå£°ã€‚
   - **constant**: ä¸ºæ‰€æœ‰æ½œåœ¨å˜é‡ç”Ÿæˆå®Œå…¨ç›¸åŒçš„å™ªå£°ï¼ˆåŸºäºç§å­ï¼‰ã€‚
   - **empty**: ä¸ºæ‰€æœ‰æ½œåœ¨å˜é‡ç”Ÿæˆæ— å™ªå£°ï¼ˆå°±åƒå™ªå£°è¢«å…³é—­ä¸€æ ·ï¼‰ã€‚
   - **repeated_context**: æ¯ context_lengthï¼ˆæˆ– view_lengthï¼‰æ½œåœ¨å˜é‡é‡å¤å™ªå£°ï¼›ç¨³å®šè¾ƒé•¿çš„ç”Ÿæˆï¼Œä½†æœ‰éå¸¸æ˜æ˜¾çš„é‡å¤ã€‚
   - **FreeNoise**: é‡å¤å™ªå£°ï¼Œä½¿å…¶æ¯ context_lengthï¼ˆæˆ– view_lengthï¼‰æ½œåœ¨å˜é‡é‡å¤ï¼Œä½†ä¸Šä¸‹æ–‡/è§†å›¾ä¹‹é—´çš„é‡å å™ªå£°è¢«æ´—ç‰Œï¼Œä»¥å‡å°‘é‡å¤ï¼ŒåŒæ—¶ä»å®ç°ç¨³å®šã€‚
- ğŸŸ¦*seed_gen*: å…è®¸åœ¨ ComfyUI å’Œ Auto1111 æ–¹æ³•ä¹‹é—´é€‰æ‹©å™ªå£°ç”Ÿæˆã€‚ä¸¤è€…éƒ½ä¸æ˜¯æ›´å¥½ï¼ˆå™ªå£°åˆ†å¸ƒç›¸åŒï¼‰ï¼Œå®ƒä»¬åªæ˜¯ä¸åŒçš„æ–¹æ³•ã€‚
   - **comfy**: æ ¹æ®æä¾›çš„ç§å­ä¸€æ¬¡æ€§ä¸ºæ•´ä¸ªæ½œåœ¨å˜é‡æ‰¹æ¬¡å¼ é‡ç”Ÿæˆå™ªå£°ã€‚
   - **auto1111**: ä¸ºæ¯ä¸ªæ½œåœ¨å˜é‡å•ç‹¬ç”Ÿæˆå™ªå£°ï¼Œæ¯ä¸ªæ½œåœ¨å˜é‡æ¥æ”¶ä¸€ä¸ªå¢åŠ çš„ +1 ç§å­åç§»ï¼ˆç¬¬ä¸€ä¸ªæ½œåœ¨å˜é‡ä½¿ç”¨ç§å­ï¼Œç¬¬äºŒä¸ªæ½œåœ¨å˜é‡ä½¿ç”¨ç§å­+1ï¼Œç­‰ç­‰ï¼‰ã€‚
- ğŸŸ¦*adapt_denoise_steps*: å½“ä¸º True æ—¶ï¼Œå¸¦æœ‰ 'denoise' è¾“å…¥çš„ KSamplers å°†è‡ªåŠ¨å‡å°‘æ€»æ­¥æ•°ï¼Œå°±åƒ Auto1111 ä¸­çš„é»˜è®¤é€‰é¡¹ä¸€æ ·ã€‚
   - **True**: æ­¥æ•°å°†éšç€è¾ƒä½çš„å»å™ªå‡å°‘ï¼Œä¾‹å¦‚ï¼Œ20 æ­¥ï¼Œ0.5 å»å™ªå°†æ‰§è¡Œ 10 ä¸ªæ€»æ­¥æ•°ï¼Œä½†é€‰æ‹©çš„ sigma ä»å°†å®ç° 0.5 å»å™ªã€‚ä»¥é€Ÿåº¦æ¢å–è´¨é‡ï¼ˆå› ä¸ºé‡‡æ ·æ­¥æ•°è¾ƒå°‘ï¼‰ã€‚
   - **False**: é»˜è®¤è¡Œä¸ºï¼›20 æ­¥ï¼Œ0.5 å»å™ªå°†æ‰§è¡Œ 20 æ­¥ã€‚

## è¿­ä»£é€‰é¡¹

è¿™äº›é€‰é¡¹å…è®¸ KSamplers é‡æ–°é‡‡æ ·ç›¸åŒçš„æ½œåœ¨å˜é‡ï¼Œè€Œä¸éœ€è¦å°†å¤šä¸ª KSamplers é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä¸”è¿˜å…è®¸ä¸“é—¨çš„è¿­ä»£è¡Œä¸ºæ¥å®ç°è¯¸å¦‚ FreeInit ä¹‹ç±»çš„åŠŸèƒ½ã€‚

### é»˜è®¤è¿­ä»£é€‰é¡¹

ç®€å•åœ°é‡æ–°è¿è¡Œ KSamplerï¼Œå°†å‰ä¸€æ¬¡è¿­ä»£çš„ç»“æœè¾“å…¥åˆ°ä¸‹ä¸€æ¬¡è¿­ä»£ä¸­ã€‚åœ¨é»˜è®¤çš„ iterations=1 æƒ…å†µä¸‹ï¼Œè¿™ä¸æ²¡æœ‰æ’å…¥è¿™ä¸ªèŠ‚ç‚¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚

| èŠ‚ç‚¹ | è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/23c5e698-6eff-43cc-92e9-488e9b5ca96a) | ğŸŸ¦*iterations*: KSampler åº”è¯¥è¿ç»­è¿è¡Œçš„æ€»æ¬¡æ•°ã€‚ <br/> ğŸŸ¦*iter_batch_offset*: åœ¨æ¯æ¬¡åç»­è¿­ä»£ä¸­åº”ç”¨çš„ batch_offsetã€‚ <br/> ğŸŸ¦*iter_seed_offset*: åœ¨æ¯æ¬¡åç»­è¿­ä»£ä¸­åº”ç”¨çš„ seed_offsetã€‚ |

### FreeInit è¿­ä»£é€‰é¡¹

å®ç°äº† [FreeInit](https://github.com/TianxingWu/FreeInit)ï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯ AnimateDiff æ˜¯åœ¨ç°æœ‰è§†é¢‘ï¼ˆå…·æœ‰æ—¶é—´ä¸€è‡´æ€§çš„å›¾åƒï¼‰çš„æ½œåœ¨å˜é‡ä¸Šè®­ç»ƒçš„ï¼Œè¿™äº›æ½œåœ¨å˜é‡éšåè¢«å™ªå£°åŒ–ï¼Œè€Œä¸æ˜¯ä»éšæœºçš„åˆå§‹å™ªå£°å¼€å§‹ï¼Œå¹¶ä¸”å½“å¯¹ç°æœ‰æ½œåœ¨å˜é‡è¿›è¡Œå™ªå£°åŒ–æ—¶ï¼Œä½é¢‘æ•°æ®ä»ç„¶ä¿ç•™åœ¨å™ªå£°åŒ–çš„æ½œåœ¨å˜é‡ä¸­ã€‚å®ƒå°†ç°æœ‰è§†é¢‘ï¼ˆæˆ–é»˜è®¤è¡Œä¸ºï¼Œå‰ä¸€æ¬¡è¿­ä»£ï¼‰çš„ä½é¢‘å™ªå£°ä¸éšæœºç”Ÿæˆå™ªå£°ä¸­çš„é«˜é¢‘å™ªå£°ç»“åˆèµ·æ¥ï¼Œè¿è¡Œåç»­è¿­ä»£ã€‚***æ¯æ¬¡è¿­ä»£éƒ½æ˜¯ä¸€æ¬¡å®Œæ•´çš„é‡‡æ · - 2 æ¬¡è¿­ä»£æ„å‘³ç€è¿è¡Œæ—¶é—´å°†æ˜¯ 1 æ¬¡è¿­ä»£/æ²¡æœ‰è¿­ä»£é€‰é¡¹è¿æ¥æ—¶çš„ä¸¤å€ã€‚***

å½“ apply_to_1st_iter ä¸º False æ—¶ï¼Œå™ªå£°åŒ–/ä½é¢‘/é«˜é¢‘ç»„åˆä¸ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­å‘ç”Ÿï¼Œå‡è®¾æ²¡æœ‰æœ‰ç”¨çš„æ½œåœ¨å˜é‡ä¼ é€’è¿›æ¥è¿›è¡Œå™ªå£°ç»„åˆï¼Œå› æ­¤è‡³å°‘éœ€è¦ 2 æ¬¡è¿­ä»£æ‰èƒ½ä½¿ FreeInit ç”Ÿæ•ˆã€‚

å¦‚æœä½ æœ‰ä¸€ç»„ç°æœ‰çš„æ½œåœ¨å˜é‡ç”¨äºè·å–ä½é¢‘å™ªå£°ï¼Œä½ å¯ä»¥å°† apply_to_1st_iter è®¾ç½®ä¸º Trueï¼Œç„¶åå³ä½¿ä½ è®¾ç½® iterations=1ï¼ŒFreeInit ä»ç„¶ä¼šç”Ÿæ•ˆã€‚

| èŠ‚ç‚¹ |
|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/21404e4f-ab67-44ed-8bf9-e510bc2571de) |

#### è¾“å…¥
- ğŸŸ¦*iterations*: KSampler åº”è¯¥è¿ç»­è¿è¡Œçš„æ€»æ¬¡æ•°ã€‚å‚è€ƒä¸Šé¢çš„è§£é‡Šï¼Œä¸ºä»€ä¹ˆé»˜è®¤æ˜¯ 2ï¼ˆä»¥åŠä½•æ—¶å¯ä»¥è®¾ç½®ä¸º 1ï¼‰ã€‚
- ğŸŸ¦*init_type*: åº”ç”¨ FreeInit çš„ä»£ç å®ç°ã€‚
   - ***FreeInit [sampler sigma]***: å¯èƒ½æœ€æ¥è¿‘é¢„æœŸçš„å®ç°ï¼Œå¹¶ä¸”ä»é‡‡æ ·å™¨è€Œä¸æ˜¯æ¨¡å‹è·å–å™ªå£°åŒ–çš„ sigmaï¼ˆå¦‚æœå¯èƒ½ï¼‰ã€‚
   - ***FreeInit [model sigma]***: ä»æ¨¡å‹è·å–å™ªå£°åŒ–çš„ sigmaï¼›å½“ä½¿ç”¨è‡ªå®šä¹‰ KSampler æ—¶ï¼Œè¿™æ˜¯å°†ç”¨äºä¸¤ä¸ª FreeInit é€‰é¡¹çš„æ–¹æ³•ã€‚
   - ***DinkInit_v1***: æˆ‘åœ¨å¼„æ¸…æ¥šå¦‚ä½•å‡†ç¡®å¤åˆ¶å™ªå£°åŒ–è¡Œä¸ºä¹‹å‰çš„åˆå§‹ã€æœ‰ç¼ºé™·çš„ FreeInit å®ç°ã€‚çº¯ç²¹é€šè¿‡è¿æ°”å’Œè¯•é”™ï¼Œæˆ‘è®¾æ³•ç”¨è¿™ç§æ–¹æ³•è®©å®ƒå®é™…ä¸Šæœ‰ç‚¹å·¥ä½œã€‚ç°åœ¨ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹ï¼Œä½†ä¹Ÿå¯èƒ½äº§ç”Ÿæœ‰ç”¨çš„ç»“æœã€‚

- ğŸŸ¦*apply_to_1st_iter*: å½“è®¾ç½®ä¸º True æ—¶ï¼Œå³ä½¿åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ä¹Ÿä¼šè¿›è¡Œ FreeInit ä½é¢‘/é«˜é¢‘ç»„åˆå·¥ä½œã€‚å‚è€ƒä¸Šé¢çš„ FreeInit è¿­ä»£é€‰é¡¹éƒ¨åˆ†çš„è§£é‡Šï¼Œäº†è§£ä½•æ—¶å¯ä»¥è®¾ç½®ä¸º Trueã€‚
- ğŸŸ¦*init_type*: åº”ç”¨ FreeInit çš„ä»£ç å®ç°ã€‚
- ğŸŸ¦*iter_batch_offset*: åœ¨æ¯æ¬¡åç»­è¿­ä»£ä¸­åº”ç”¨çš„ batch_offsetã€‚
- ğŸŸ¦*iter_seed_offset*: åœ¨æ¯æ¬¡åç»­è¿­ä»£ä¸­åº”ç”¨çš„ seed_offsetã€‚é»˜è®¤å€¼ä¸º 1ï¼Œä»¥ä¾¿æ¯æ¬¡è¿­ä»£ä½¿ç”¨æ–°çš„éšæœºå™ªå£°ã€‚

- ğŸŸ¦*filter*: ç¡®å®šåº”ç”¨äºå™ªå£°çš„ä½é¢‘æ»¤æ³¢å™¨ã€‚éå¸¸æŠ€æœ¯æ€§ï¼ŒæŸ¥çœ‹ä»£ç /åœ¨çº¿èµ„æºä»¥äº†è§£å„ä¸ªæ»¤æ³¢å™¨çš„ä½œç”¨ã€‚
- ğŸŸ¦*d_s*: æ»¤æ³¢å™¨çš„ç©ºé—´å‚æ•°ï¼ˆåœ¨æ½œåœ¨å˜é‡å†…ï¼Œæˆ‘è®¤ä¸ºï¼‰ï¼›éå¸¸æŠ€æœ¯æ€§ã€‚å¦‚æœä½ æƒ³çŸ¥é“å®ƒåˆ°åº•åšäº†ä»€ä¹ˆï¼ŒæŸ¥çœ‹ä»£ç /åœ¨çº¿èµ„æºã€‚
- ğŸŸ¦*d_t*: æ»¤æ³¢å™¨çš„æ—¶é—´å‚æ•°ï¼ˆè·¨æ½œåœ¨å˜é‡ï¼Œæˆ‘è®¤ä¸ºï¼‰ï¼›éå¸¸æŠ€æœ¯æ€§ã€‚å¦‚æœä½ æƒ³çŸ¥é“å®ƒåˆ°åº•åšäº†ä»€ä¹ˆï¼ŒæŸ¥çœ‹ä»£ç /åœ¨çº¿èµ„æºã€‚
- ğŸŸ¦*n_butterworth*: ä»…é€‚ç”¨äº ```butterworth``` æ»¤æ³¢å™¨ï¼›éå¸¸æŠ€æœ¯æ€§ã€‚å¦‚æœä½ æƒ³çŸ¥é“å®ƒåˆ°åº•åšäº†ä»€ä¹ˆï¼ŒæŸ¥çœ‹ä»£ç /åœ¨çº¿èµ„æºã€‚
- ğŸŸ¦*sigma_step*: å™ªå£°åŒ–æ½œåœ¨å˜é‡ä»¥è·å–ä½é¢‘å™ªå£°æ—¶ä½¿ç”¨çš„/æ¨¡æ‹Ÿçš„å™ªå£°åŒ–æ­¥éª¤ã€‚999 å®é™…ä¸Šæ„å‘³ç€æœ€åä¸€ä¸ªï¼ˆ-1ï¼‰ï¼Œä»»ä½•å°äº 999 çš„æ•°å­—æ„å‘³ç€è·ç¦»æœ€åä¸€ä¸ªçš„è·ç¦»ã€‚é™¤éä½ çŸ¥é“ä½ æƒ³ç”¨å®ƒåšä»€ä¹ˆï¼Œå¦åˆ™ä¿æŒä¸º 999ã€‚

## å™ªå£°å±‚

è¿™äº›èŠ‚ç‚¹å…è®¸åˆå§‹å™ªå£°è¢«æ·»åŠ ã€åŠ æƒæˆ–æ›¿æ¢ã€‚åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘å°†æ·»åŠ èƒ½åŠ›ï¼Œä½¿æ©ç ç›¸å¯¹äºæ©ç çš„è¿åŠ¨â€œç§»åŠ¨â€å™ªå£°ï¼Œè€Œä¸æ˜¯ä»…ä»…â€œå‰ªåˆ‡å’Œç²˜è´´â€å™ªå£°ã€‚

ä¸é‡‡æ ·è®¾ç½®å…±äº«çš„è¾“å…¥å…·æœ‰å®Œå…¨ç›¸åŒçš„æ•ˆæœ - å”¯ä¸€çš„æ–°çš„é€‰é¡¹æ˜¯ seed_gen_overrideï¼Œé»˜è®¤æƒ…å†µä¸‹å°†ä½¿ç”¨ä¸é‡‡æ ·è®¾ç½®ç›¸åŒçš„ seed_genï¼ˆä½¿ç”¨ç°æœ‰çš„ï¼‰ã€‚ä½ å¯ä»¥éšæ„è®©å™ªå£°å±‚ä½¿ç”¨ä¸åŒçš„ seed_gen ç­–ç•¥ï¼Œæˆ–è€…ä½¿ç”¨ä¸åŒçš„ç§å­/ç§å­é›†ç­‰ã€‚

```mask_optional``` å‚æ•°å†³å®šäº†å™ªå£°å±‚åº”è¯¥åº”ç”¨äºåˆå§‹å™ªå£°çš„å“ªä¸ªä½ç½®ã€‚

| èŠ‚ç‚¹ | è¡Œä¸º + è¾“å…¥ |
|---|---|
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/66487969-669d-47d3-9742-85ae26606903) | [Add]; ç›´æ¥åœ¨é¡¶éƒ¨æ·»åŠ å™ªå£°ã€‚ <br/> ğŸŸ¦*noise_weight*: åœ¨æ·»åŠ åˆ°é¡¶éƒ¨ä¹‹å‰å™ªå£°å±‚çš„ä¹˜æ•°ã€‚ |
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/52acb25c-9116-4594-b3fb-01b7b15bb79d) | [Add Weighted]; æ·»åŠ å™ªå£°ï¼Œä½†åœ¨å·²ç»å­˜åœ¨çš„å™ªå£°å’Œè‡ªèº«ä¹‹é—´å–åŠ æƒå¹³å‡ã€‚ <br/> ğŸŸ¦*noise_weight*: æ–°å™ªå£°åœ¨ç°æœ‰å™ªå£°çš„åŠ æƒå¹³å‡ä¸­çš„æƒé‡ã€‚ <br/> ğŸŸ¦*balance_multipler*: å™ªå£°æƒé‡å½±å“ç°æœ‰å™ªå£°çš„å°ºåº¦ï¼›1.0 æ„å‘³ç€æ­£å¸¸çš„åŠ æƒå¹³å‡ï¼Œä½äº 1.0 å°†å‡å°‘åŠ æƒå‡å°‘çš„é‡ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœ balance_multiplier è®¾ç½®ä¸º 0.5 ä¸” noise_weight ä¸º 0.25ï¼Œç°æœ‰å™ªå£°åªä¼šå‡å°‘ 0.125 è€Œä¸æ˜¯ 0.25ï¼Œä½†æ–°å™ªå£°å°†ä»¥æœªä¿®æ”¹çš„ 0.25 æƒé‡æ·»åŠ ï¼‰ã€‚ |
| ![image](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/4feb586e-9920-4f35-8f92-e2e36fabb2df) | [Replace]; ç›´æ¥ç”¨è‡ªèº«æ›¿æ¢ä¸‹é¢å±‚çš„ç°æœ‰å™ªå£°ã€‚ |


# ç¤ºä¾‹ï¼ˆä¸‹è½½æˆ–æ‹–åŠ¨å·¥ä½œæµç¨‹çš„å›¾åƒåˆ° ComfyUI ä¸­ä»¥ç«‹å³åŠ è½½ç›¸åº”çš„å·¥ä½œæµç¨‹ï¼ï¼‰

æ³¨æ„ï¼šæˆ‘å·²ç»å°† gif ç¼©å°åˆ° 0.75 å€å¤§å°ï¼Œä»¥ä½¿å®ƒä»¬åœ¨ README ä¸­å ç”¨æ›´å°‘çš„ç©ºé—´ã€‚

### txt2img

| ç»“æœ |
|---|
| ![readme_00006](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b615a4aa-db3e-4b24-b88f-b694e52f6364) |
| å·¥ä½œæµç¨‹ |
| ![t2i_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/6eb47506-b503-482b-9baf-4c238f30a9c2)   |

### txt2img - (æç¤ºæ—…è¡Œ)

| ç»“æœ |
|---|
| ![readme_00010](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c27a2029-2c69-4272-b40f-64408e9e2ea6) |
| å·¥ä½œæµç¨‹ |
| ![t2i_prompttravel_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/e5a72ea1-628d-423e-98ed-f20e1bcc5320) |



### txt2img - 48 å¸§åŠ¨ç”»ï¼Œ16 context_lengthï¼ˆä¸Šä¸‹æ–‡é€‰é¡¹â—†æ ‡å‡†é™æ€ï¼‰+ FreeNoise

| ç»“æœ |
|---|
| ![readme_00012](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/684f6e79-d653-482f-899a-1900dc56cd8f) |
| å·¥ä½œæµç¨‹ |
| ![t2i_context_freenoise_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/9d0e53fa-49d6-483d-a660-3f41d7451002) |


# æ—§ç¤ºä¾‹ï¼ˆTODOï¼šå½“æˆ‘å¾—åˆ°ä¼‘æ¯æ—¶æ›´æ–°æ‰€æœ‰è¿™äº› + æ·»åŠ æ–°çš„ï¼‰

### txt2img - 32 å¸§åŠ¨ç”»ï¼Œ16 context_lengthï¼ˆå‡åŒ€ï¼‰- PanLeft å’Œ ZoomOut è¿åŠ¨ LoRAs

![t2i_context_mlora_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/41ec4141-389c-4ef4-ae3e-a963a0fa841f)

![aaa_readme_00094_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/14abee9a-5500-4d14-8632-15ac77ba5709)

[aaa_readme_00095_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d730ae2e-188c-4a61-8a6d-bd48f60a2d07)


### txt2img w/ æ½œåœ¨ä¸Šé‡‡æ ·ï¼ˆä¸Šé‡‡æ ·æ—¶éƒ¨åˆ†å»å™ªï¼‰

![t2i_lat_ups_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/521991dd-8e39-4fed-9970-514507c75067)

![aaa_readme_up_00001_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f4199e25-c839-41ed-8986-fb7dbbe2ac52)

[aaa_readme_up_00002_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/2f44342f-3fd8-4863-8e3d-360377d608b7)



### ä½¿ç”¨æ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶éƒ¨åˆ†å»å™ªï¼‰çš„txt2img - PanLeftå’ŒZoomOutè¿åŠ¨LoRAs

![t2i_mlora_lat_ups_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f34882de-7dd4-4264-8f59-e24da350be2a)

![aaa_readme_up_00023_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/e2ca5c0c-b5d9-42de-b877-4ed29db81eb9)

[aaa_readme_up_00024_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/414c16d8-231c-422f-8dfc-a93d4b68ffcc)



### ä½¿ç”¨æ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶éƒ¨åˆ†å»å™ªï¼‰çš„txt2img - 48å¸§åŠ¨ç”»ï¼Œ16ä¸ªä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå‡åŒ€ï¼‰

![t2i_lat_ups_full_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a1ebc14e-853e-4cda-9cda-9a7553fa3d85)

[aaa_readme_up_00009_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f7a45f81-e700-4bfe-9fdd-fbcaa4fa8a4e)



### ä½¿ç”¨æ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶å®Œå…¨å»å™ªï¼‰çš„txt2img

![t2i_lat_ups_full_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/5058f201-3f52-4c48-ac7e-525c3c8f3df3)

![aaa_readme_up_00010_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/804610de-18ec-43af-9af2-4a83cf31d16b)

[aaa_readme_up_00012_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/3eb575cf-92dd-434a-b3db-1a2064ff0033)



### ä½¿ç”¨æ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶å®Œå…¨å»å™ªï¼‰çš„txt2img - 48å¸§åŠ¨ç”»ï¼Œ16ä¸ªä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå‡åŒ€ï¼‰

![t2i_context_lat_ups_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7b9ec22b-d4e0-4083-9846-5743ed90583e)

[aaa_readme_up_00014_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/034aff4c-f814-4b87-b5d1-407b1089af0d)



### ä½¿ç”¨ControlNetç¨³å®šæ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶éƒ¨åˆ†å»å™ªï¼Œç¼©æ”¾è½¯æ§åˆ¶ç½‘æƒé‡ï¼‰çš„txt2img

![t2i_lat_ups_softcontrol_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c769c2bd-5aac-48d0-92b7-d73c422d4863)

![aaa_readme_up_00017_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/221954cc-95df-4e0c-8ec9-266d0108dad4)

[aaa_readme_up_00019_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b562251d-a4fb-4141-94dd-9f8bca9f3ce8)



### ä½¿ç”¨ControlNetç¨³å®šæ½œåœ¨æ”¾å¤§ï¼ˆæ”¾å¤§æ—¶éƒ¨åˆ†å»å™ªï¼Œç¼©æ”¾è½¯æ§åˆ¶ç½‘æƒé‡ï¼‰çš„txt2img - 48å¸§åŠ¨ç”»ï¼Œ16ä¸ªä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå‡åŒ€ï¼‰

![t2i_context_lat_ups_softcontrol_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/798567a8-4ef0-4814-aeeb-4f770df8d783)

[aaa_readme_up_00003_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/0f57c949-0af3-4da4-b7c4-5c1fb1549927)



### ä½¿ç”¨åˆå§‹ControlNetè¾“å…¥çš„txt2imgï¼ˆä»¥åœ¨ç¬¬ä¸€ä¸ªtxt2imgä¸Šä½¿ç”¨Normal LineArté¢„å¤„ç†å™¨ä¸ºä¾‹ï¼‰

![t2i_initcn_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/caa7abdf-7ba0-456c-9fa4-547944ea6e72)

![aaa_readme_cn_00002_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/055ef87c-50c6-4bb9-b35e-dd97916b47cc)

[aaa_readme_cn_00003_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/9c9d425d-2378-4af0-8464-2c6c0d1a68bf)



### ä½¿ç”¨åˆå§‹ControlNetè¾“å…¥çš„txt2imgï¼ˆä»¥åœ¨ç¬¬ä¸€ä¸ªtxt2imgä¸Šä½¿ç”¨Normal LineArté¢„å¤„ç†å™¨ä¸ºä¾‹ï¼‰- 48å¸§åŠ¨ç”»ï¼Œ16ä¸ªä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå‡åŒ€ï¼‰

![t2i_context_initcn_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f9de2711-dcfd-4fea-8b3b-31e3794fbff9)

![aaa_readme_cn_00005_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/6bf14361-5b09-4305-b2a7-f7babad4bd14)

[aaa_readme_cn_00006_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/5d3665b7-c2da-46a1-88d8-ab43ba8eb0c6)



### ä½¿ç”¨åˆå§‹ControlNetè¾“å…¥ï¼ˆä½¿ç”¨OpenPoseå›¾åƒï¼‰+ æ½œåœ¨æ”¾å¤§ä¸å®Œå…¨å»å™ªçš„txt2img

![t2i_openpose_upscale_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/306a40c4-0591-496d-a320-c33f0fc4b3d2)

(ä½¿ç”¨toyxyzæä¾›çš„OpenPoseå›¾åƒ)

![AA_openpose_cn_gif_00001_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff/assets/7365912/23291941-864d-495a-8ba8-d02e05756396)

![aaa_readme_cn_00032_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/621a2ca6-2f08-4ed1-96ad-8e6635303173)

[aaa_readme_cn_00033_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c5df09a5-8c64-4811-9ecf-57ac73d82377)



### ä½¿ç”¨åˆå§‹ControlNetè¾“å…¥ï¼ˆä½¿ç”¨OpenPoseå›¾åƒï¼‰+ æ½œåœ¨æ”¾å¤§ä¸å®Œå…¨å»å™ªçš„txt2img - 48å¸§åŠ¨ç”»ï¼Œ16ä¸ªä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå‡åŒ€ï¼‰

![t2i_context_openpose_upscale_wf](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a931af6f-bf6a-40d3-bd55-1d7bad32e665)

(ä½¿ç”¨toyxyzæä¾›çš„OpenPoseå›¾åƒ)

![aaa_readme_preview_00002_](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/028a1e9e-37b5-477d-8665-0e8723306d65)

[aaa_readme_cn_00024_.webm](https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8f4c840c-06a2-4c64-b97e-568dd5ff6f46)



### img2img

TODO: å¡«å……ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ï¼Œæœ‰äº›ä½¿ç”¨ControlNet Tileã€‚å¾ˆæŠ±æ­‰ç›®å‰è¿™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæˆ‘æœ‰å¾ˆå¤šä»£ç è¦å†™ã€‚æˆ‘ä¼šå°è¯•é€æ­¥å¡«å……è¿™éƒ¨åˆ†å†…å®¹ï¼ŒåŒ…æ‹¬é«˜çº§ControlNetçš„ä½¿ç”¨ã€‚



## å·²çŸ¥é—®é¢˜

### æŸäº›è¿åŠ¨æ¨¡å‹åœ¨ç”Ÿæˆçš„å›¾åƒä¸Šæœ‰å¯è§çš„æ°´å°ï¼ˆå°¤å…¶æ˜¯åœ¨ä½¿ç”¨mm_sd_v15æ—¶ï¼‰

AnimateDiffè®ºæ–‡ä½œè€…ä½¿ç”¨çš„è®­ç»ƒæ•°æ®åŒ…å«Shutterstockæ°´å°ã€‚ç”±äºmm_sd_v15æ˜¯åœ¨æ›´ç²¾ç»†ã€ä¸é‚£ä¹ˆå‰§çƒˆçš„è¿åŠ¨ä¸Šè¿›è¡Œå¾®è°ƒçš„ï¼Œè¿åŠ¨æ¨¡å—è¯•å›¾å¤åˆ¶è¯¥æ°´å°çš„é€æ˜åº¦ï¼Œå¹¶ä¸”ä¸åƒmm_sd_v14é‚£æ ·è¢«æ¨¡ç³Šæ‰ã€‚ä½¿ç”¨å…¶ä»–è¿åŠ¨æ¨¡å—ï¼Œæˆ–è€…ä½¿ç”¨é«˜çº§KSamplersçš„ç»„åˆï¼Œåº”è¯¥å¯ä»¥ç¼“è§£æ°´å°é—®é¢˜ã€‚
